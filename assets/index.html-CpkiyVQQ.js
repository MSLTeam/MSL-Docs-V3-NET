import{_ as t,c as r,b as a,o as i}from"./app-D_BO8yA8.js";const o="/assets/image-20251011162056844-1760596903416-1-DQMDYtL9.png",p="/assets/image-20251011162611854-1760596962324-4-Cki1jOaY.png",s="/assets/image-20251011162823582-1760596969532-7-D-w81mC3.png",n={};function l(c,e){return i(),r("div",null,[...e[0]||(e[0]=[a('<p>默认情况下，开启Frp后，MC服务器获取到的IP均为本地回环地址<code>127.0.0.1</code>。</p><p>按照以下操作即可开启frp的<code>proxy protocol</code>协议以支持获取用户真实IP。</p><div class="hint-container warning"><p class="hint-container-title">注意</p><p>开启此协议需要您正在使用的服务端 <mark class="warning">支持proxy protocol</mark> 协议。</p><p>并且大部分情况下，启用此协议支持后您 <mark class="warning">无法再通过非代理地址</mark>（即内网/本地IP地址）直接进入您的服务器。</p></div><div class="vp-steps"><ol><li><h3 id="配置隧道参数" tabindex="-1"><a class="header-anchor" href="#配置隧道参数"><span>配置隧道参数</span></a></h3><p>这里以 <mark>MSLFrp</mark> 为例进行配置，其他Frp服务商请自行寻找相关配置方法或者自行修改Frpc配置文件。</p><p>首先，在创建隧道的时候填写开启协议支持的额外参数：</p><div class="language-toml line-numbers-mode" data-highlighter="shiki" data-ext="toml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-toml"><span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">transport</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">proxyProtocolVersion</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">v2</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="'+o+'" alt="img" width="569" height="835"></p><p>然后按照正常步骤启动Frp隧道。</p></li><li><h3 id="配置服务端协议支持" tabindex="-1"><a class="header-anchor" href="#配置服务端协议支持"><span>配置服务端协议支持</span></a></h3><p>接下来需要配置服务端的支持（这里以paper端为例）。</p><div class="hint-container warning"><p class="hint-container-title">注意</p><p><mark class="warning">并非所有服务端都支持此协议</mark>，例如Spigot端就不支持。</p><p><mark class="warning">大部分的paper及其下游服务端</mark> 是支持的，其他服务端可以自行寻找模组/插件进行支持。</p></div><p>找到paper的配置文件<code>config\\paper-global.yaml</code>，找到配置组<code>proxies</code>，将配置项<code>proxy-protocol</code>修改为<code>true</code>即可，而后重启您的服务端就完成了所有的配置流程。</p><p><img src="'+p+'" alt="img" width="2035" height="695"></p><p>玩家再次加入服务器时，即可正常获取真实的IP。</p><p><img src="'+s+'" alt="image-20251011162823582" width="1066" height="663"></p></li></ol></div><div class="hint-container tip"><p class="hint-container-title">其他支持方案</p><ul><li>使用<a href="https://papermc.io/software/velocity" target="_blank" rel="noopener noreferrer">Velocity</a>代理端嵌套您的插件/模组服务端以实现（此代理端支持上述proxy协议），可能需要配合此模组：<a href="https://www.mcmod.cn/class/13564.html" target="_blank" rel="noopener noreferrer">Proxy Compatible Forge - MC百科</a> 或者此插件：<a href="https://modrinth.com/plugin/ambassador/versions" target="_blank" rel="noopener noreferrer">Ambassador - Minecraft Plugin</a>。</li><li>Fabric可以看看这个模组（似乎很久没更新了）：<a href="https://modrinth.com/mod/proxy-protocol-support/versions" target="_blank" rel="noopener noreferrer">Proxy Protocol Support - Minecraft Mod</a>。</li><li>对于模组端，可能更加通用的方案仍然是使用上述所说的代理端。</li></ul></div>',5)])])}const h=t(n,[["render",l]]),m=JSON.parse('{"path":"/docs/proxy/frp-real-ip/","title":"Frp获取用户真实IP","lang":"zh-CN","frontmatter":{"icon":"map-location","title":"Frp获取用户真实IP","createTime":"2025/10/16 14:30:57","permalink":"/docs/proxy/frp-real-ip/","description":"默认情况下，开启Frp后，MC服务器获取到的IP均为本地回环地址127.0.0.1。 按照以下操作即可开启frp的proxy protocol协议以支持获取用户真实IP。 注意 开启此协议需要您正在使用的服务端 支持proxy protocol 协议。 并且大部分情况下，启用此协议支持后您 无法再通过非代理地址（即内网/本地IP地址）直接进入您的服务器...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Frp获取用户真实IP\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-10-16T06:52:44.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://www.mslmc.cn/docs/proxy/frp-real-ip/"}],["meta",{"property":"og:site_name","content":"MSL开服器"}],["meta",{"property":"og:title","content":"Frp获取用户真实IP"}],["meta",{"property":"og:description","content":"默认情况下，开启Frp后，MC服务器获取到的IP均为本地回环地址127.0.0.1。 按照以下操作即可开启frp的proxy protocol协议以支持获取用户真实IP。 注意 开启此协议需要您正在使用的服务端 支持proxy protocol 协议。 并且大部分情况下，启用此协议支持后您 无法再通过非代理地址（即内网/本地IP地址）直接进入您的服务器..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-10-16T06:52:44.000Z"}],["meta",{"property":"article:modified_time","content":"2025-10-16T06:52:44.000Z"}]]},"readingTime":{"minutes":1.76,"words":529},"git":{"createdTime":1760597564000,"updatedTime":1760597564000,"contributors":[{"name":"xiaoyu","username":"luluxiaoyu","email":"ljy.xiaoyu@qq.com","commits":1,"avatar":"https://q.qlogo.cn/headimg_dl?dst_uin=1791123970&spec=640&img_type=jpg","url":"https://github.com/luluxiaoyu"}],"changelog":[{"hash":"b652b43b4a4d960e80d2003b7f8203631955d780","time":1760597564000,"email":"ljy.xiaoyu@qq.com","author":"xiaoyu","message":"docs: 更新映射/点对点联机相关文档"}]},"autoDesc":true,"filePathRelative":"docs/proxy/frp-real-ip.md","headers":[]}');export{h as comp,m as data};
