import{_ as t,c as r,b as p,o as a}from"./app-D2LZAKRT.js";const i="/assets/image-20250524223145966-1e7c9RqN.png",s="/assets/image-20250524223456192-tkrdNfc-.png",o="/assets/image-20250524223731317-C8413Bse.png",n="/assets/image-20250524223818912-C8feU9YY.png",c="/assets/image-20250524223954001-DM6J969H.png",l="/assets/image-20251011162056844-DQMDYtL9.png",h="/assets/image-20251011162611854-Cki1jOaY.png",d="/assets/image-20251011162823582-D-w81mC3.png",m="/assets/image-20250524222934498-CjArM53f.png",g="/assets/image-20250524224419812-BWu0x5kz.png",f={};function u(k,e){return a(),r("div",null,[...e[0]||(e[0]=[p('<h2 id="msl-frp" tabindex="-1"><a class="header-anchor" href="#msl-frp"><span><a href="https://user.mslmc.net/" target="_blank" rel="noopener noreferrer">MSL Frp</a></span></a></h2><p>首先，切换到<code>映射</code>选项卡，然后点击<code>添加隧道</code>。</p><p><img src="'+i+'" alt="" width="1461" height="853"></p><p>根据提示，输入<code>账号密码登录</code>。</p><p>若未注册MSL账户，请先前往<a href="https://user.mslmc.net" target="_blank" rel="noopener noreferrer">MSL用户中心</a>注册账户。</p><p>进入创建隧道选项卡，选择就近的节点，填写相应的参数（如果不懂，那就不要改就好啦）。<code>KCP</code>一般不建议开。</p><p><img src="'+s+'" alt="" width="951" height="554"></p><p>创建隧道后，选择你创建的隧道，点击<code>选择该隧道</code>即可。</p><p><img src="'+o+'" alt="" width="938" height="550"></p><p>回到<code>隧道</code>选项卡主页，<code>双击</code>你刚才创建的隧道进入启动页面。</p><p><img src="'+n+'" alt="" width="1469" height="861"></p><p>启动隧道，成功后即可使用连接地址进入您的MC服务器。</p><p><img src="'+c+'" alt="" width="1465" height="848"></p><h2 id="高级配置-获取用户真实ip" tabindex="-1"><a class="header-anchor" href="#高级配置-获取用户真实ip"><span>[高级配置]获取用户真实IP</span></a></h2><p>默认情况下，开启Frp后，MC服务器获取到的IP均为本地回环地址<code>127.0.0.1</code>。</p><p>按照以下操作即可开启frp的<code>proxy protocol</code>协议以支持获取用户真实IP。</p><div class="hint-container warning"><p class="hint-container-title">注意</p><p>开启此协议需要您正在使用的服务端支持proxy protocol协议。</p><p>并且大部分情况下，启用此协议支持后您无法再通过非代理地址（即内网/本地IP地址）直接进入您的服务器。</p></div><p>这里以<code>MSLFrp</code>为例进行配置，其他Frp服务商请自行寻找相关配置方法或者自行修改Frpc配置文件。</p><p>首先，在创建隧道的时候填写开启协议支持的额外参数：</p><div class="language-toml line-numbers-mode" data-highlighter="shiki" data-ext="toml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-toml"><span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">transport</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">proxyProtocolVersion</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">v2</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="'+l+'" alt="" width="569" height="835"></p><p>然后按照正常步骤启动Frp隧道。</p><p>接下来需要配置服务端的支持（这里以paper端为例子）。</p><div class="hint-container warning"><p class="hint-container-title">注意</p><p>并非所有服务端都支持此协议，例如Spigot端就不支持。</p><p>大部分的paper及其下游服务端是支持的，其他服务端可以自行寻找模组/插件进行支持。</p></div><p>找到paper的配置文件<code>config\\paper-global.yaml</code>，找到配置组<code>proxies</code>，将配置项<code>proxy-protocol</code>修改为<code>true</code>即可，而后重启您的服务端就完成了所有的配置流程。</p><p><img src="'+h+'" alt="" width="2035" height="695"></p><p>玩家再次加入服务器时，即可正常获取真实的IP。</p><p><img src="'+d+'" alt="image-20251011162823582" width="1066" height="663"></p><div class="hint-container tip"><p class="hint-container-title">其他支持方案</p><ul><li>使用<a href="https://papermc.io/software/velocity" target="_blank" rel="noopener noreferrer">Velocity</a>代理端嵌套您的插件/模组服务端以实现（此代理端支持上述proxy协议），可能需要配合此模组：<a href="https://www.mcmod.cn/class/13564.html" target="_blank" rel="noopener noreferrer">Proxy Compatible Forge - MC百科</a> 或者此插件：<a href="https://modrinth.com/plugin/ambassador/versions" target="_blank" rel="noopener noreferrer">Ambassador - Minecraft Plugin</a>。</li><li>Fabric可以看看这个模组（似乎很久没更新了）：<a href="https://modrinth.com/mod/proxy-protocol-support/versions" target="_blank" rel="noopener noreferrer">Proxy Protocol Support - Minecraft Mod</a>。</li><li>对于模组端，可能更加通用的方案仍然是使用上述所说的代理端。</li></ul></div><h2 id="其它frp" tabindex="-1"><a class="header-anchor" href="#其它frp"><span>其它Frp</span></a></h2><p>在这里可以选择其他服务商，按照提示登录即可~</p><p>目前支持的第三方服务商：OpenFrp，Sakura Frp，ChmlFrp，ME Frp</p><p><img src="'+m+'" alt="" width="934" height="55"></p><h2 id="自定义frp" tabindex="-1"><a class="header-anchor" href="#自定义frp"><span>自定义Frp</span></a></h2><p>粘贴配置文件进去就好~（建议<code>toml</code>格式）</p><p><img src="'+g+'" alt="" width="921" height="553"></p>',36)])])}const _=t(f,[["render",u]]),x=JSON.parse('{"path":"/docs/proxy/frp/","title":"内网穿透(Frp)配置","lang":"zh-CN","frontmatter":{"icon":"ethernet","title":"内网穿透(Frp)配置","createTime":"2025/10/12 21:16:59","permalink":"/docs/proxy/frp/","description":"MSL Frp 首先，切换到映射选项卡，然后点击添加隧道。 根据提示，输入账号密码登录。 若未注册MSL账户，请先前往MSL用户中心注册账户。 进入创建隧道选项卡，选择就近的节点，填写相应的参数（如果不懂，那就不要改就好啦）。KCP一般不建议开。 创建隧道后，选择你创建的隧道，点击选择该隧道即可。 回到隧道选项卡主页，双击你刚才创建的隧道进入启动页面。...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"内网穿透(Frp)配置\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-10-12T14:56:29.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://www.mslmc.cn/docs/proxy/frp/"}],["meta",{"property":"og:site_name","content":"MSL开服器"}],["meta",{"property":"og:title","content":"内网穿透(Frp)配置"}],["meta",{"property":"og:description","content":"MSL Frp 首先，切换到映射选项卡，然后点击添加隧道。 根据提示，输入账号密码登录。 若未注册MSL账户，请先前往MSL用户中心注册账户。 进入创建隧道选项卡，选择就近的节点，填写相应的参数（如果不懂，那就不要改就好啦）。KCP一般不建议开。 创建隧道后，选择你创建的隧道，点击选择该隧道即可。 回到隧道选项卡主页，双击你刚才创建的隧道进入启动页面。..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-10-12T14:56:29.000Z"}],["meta",{"property":"article:modified_time","content":"2025-10-12T14:56:29.000Z"}]]},"readingTime":{"minutes":2.49,"words":748},"git":{"createdTime":1760280989000,"updatedTime":1760280989000,"contributors":[{"name":"xiaoyu","username":"luluxiaoyu","email":"ljy.xiaoyu@qq.com","commits":1,"avatar":"https://q.qlogo.cn/headimg_dl?dst_uin=1791123970&spec=640&img_type=jpg","url":"https://github.com/luluxiaoyu"}],"changelog":[{"hash":"3bfa293d1664e322a8996203bd3cf561de112a83","time":1760280989000,"email":"ljy.xiaoyu@qq.com","author":"xiaoyu","message":"移植旧版文档"}]},"autoDesc":true,"filePathRelative":"docs/proxy/frp.md","headers":[]}');export{_ as comp,x as data};
